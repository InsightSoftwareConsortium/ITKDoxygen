<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ITK: Examples/RegistrationITKv4/DeformableRegistration15.cxx</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="ITK"/>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js"></script>
<script type="text/javascript" src="build_text.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ITKDoxygenStyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="itkLogoSmall.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ITK
   &#160;<span id="projectnumber">5.3.0</span>
   </div>
   <div id="projectbrief">Insight Toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!--  Scripts intended to allow users to submit patches with documentation fixes -->
<!-- <script src="https://www.itk.org/Doxygen/js/jquery-1.4.3.min.js" type="text/javascript" charset="utf-8"></script> -->
<!-- <script src="https://www.itk.org/Doxygen/js/editdoxygen.js" type="text/javascript" charset="utf-8"></script> -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,true,'search.php','Search');
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Examples/RegistrationITKv4/DeformableRegistration15.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/*=========================================================================</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  Copyright NumFOCUS</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><span class="comment"> *  you may not use this file except in compliance with the License.</span></div>
<div class="line"><span class="comment"> *  You may obtain a copy of the License at</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *         http://www.apache.org/licenses/LICENSE-2.0.txt</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><span class="comment"> *  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><span class="comment"> *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><span class="comment"> *  See the License for the specific language governing permissions and</span></div>
<div class="line"><span class="comment"> *  limitations under the License.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *=========================================================================*/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Software Guide : BeginLatex</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// This example illustrates a realistic pipeline for solving a full deformable</span></div>
<div class="line"><span class="comment">// registration problem.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// First the two images are roughly aligned by using a transform</span></div>
<div class="line"><span class="comment">// initialization, then they are registered using a rigid transform, that in</span></div>
<div class="line"><span class="comment">// turn, is used to initialize a registration with an affine transform. The</span></div>
<div class="line"><span class="comment">// transform resulting from the affine registration is compounded with</span></div>
<div class="line"><span class="comment">// a BSplineTransform. The deformable registration is computed,</span></div>
<div class="line"><span class="comment">// and finally the resulting transform is used to resample the moving image.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Software Guide : EndLatex</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkImageRegistrationMethod_8h.html">itkImageRegistrationMethod.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkMattesMutualInformationImageToImageMetric_8h.html">itkMattesMutualInformationImageToImageMetric.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkTimeProbesCollectorBase_8h.html">itkTimeProbesCollectorBase.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkMemoryProbesCollectorBase_8h.html">itkMemoryProbesCollectorBase.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//  Software Guide : BeginLatex</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  The following are the most relevant headers to this example.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  \index{itk::VersorRigid3DTransform!header}</span></div>
<div class="line"><span class="comment">//  \index{itk::AffineTransform!header}</span></div>
<div class="line"><span class="comment">//  \index{itk::BSplineTransform!header}</span></div>
<div class="line"><span class="comment">//  \index{itk::RegularStepGradientDescentOptimizer!header}</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Software Guide : EndLatex</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Software Guide : BeginCodeSnippet</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkCenteredTransformInitializer_8h.html">itkCenteredTransformInitializer.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkVersorRigid3DTransform_8h.html">itkVersorRigid3DTransform.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkAffineTransform_8h.html">itkAffineTransform.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkBSplineTransform_8h.html">itkBSplineTransform.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkCompositeTransform_8h.html">itkCompositeTransform.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkRegularStepGradientDescentOptimizer_8h.html">itkRegularStepGradientDescentOptimizer.h</a>&quot;</span></div>
<div class="line"><span class="comment">// Software Guide : EndCodeSnippet</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkBSplineResampleImageFunction_8h.html">itkBSplineResampleImageFunction.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkBSplineDecompositionImageFilter_8h.html">itkBSplineDecompositionImageFilter.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkImageFileReader_8h.html">itkImageFileReader.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkImageFileWriter_8h.html">itkImageFileWriter.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkResampleImageFilter_8h.html">itkResampleImageFilter.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkCastImageFilter_8h.html">itkCastImageFilter.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkSquaredDifferenceImageFilter_8h.html">itkSquaredDifferenceImageFilter.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkSqrtImageFilter_8h.html">itkSqrtImageFilter.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkTransformFileWriter_8h.html">itkTransformFileWriter.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//  The following section of code implements a Command observer</span></div>
<div class="line"><span class="comment">//  used to monitor the evolution of the registration process.</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="itkCommand_8h.html">itkCommand.h</a>&quot;</span></div>
<div class="line"><span class="keyword">class </span>CommandIterationUpdate : <span class="keyword">public</span> <a name="_a0"></a><a class="code" href="classitk_1_1Command.html">itk::Command</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  <span class="keyword">using</span> <a name="_a1"></a><a class="code" href="classAddImageFilter.html">Self</a> = CommandIterationUpdate;</div>
<div class="line">  <span class="keyword">using</span> <a class="code" href="itkAddImageFilter_8h.html#a8c77390f5f26f2ec5a75801152e1f673">Superclass</a> = <a name="a2"></a><a class="code" href="namespaceitk.html#af2b97d337bf8035236a54a91fdcf040a">itk::Command</a>;</div>
<div class="line">  <span class="keyword">using</span> <a class="code" href="itkAddImageFilter_8h.html#ac831674d6d3f7cd2148ae944cbaa7c9d">Pointer</a> = <a name="_a3"></a><a class="code" href="classitk_1_1SmartPointer.html">itk::SmartPointer&lt;Self&gt;</a>;</div>
<div class="line">  itkNewMacro(<a class="code" href="classAddImageFilter.html">Self</a>);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">  CommandIterationUpdate() = <span class="keywordflow">default</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  <span class="keyword">using</span> OptimizerType = <a name="_a4"></a><a class="code" href="classitk_1_1RegularStepGradientDescentOptimizer.html">itk::RegularStepGradientDescentOptimizer</a>;</div>
<div class="line">  <span class="keyword">using</span> OptimizerPointer = <span class="keyword">const</span> OptimizerType *;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span></div>
<div class="line">  <a name="a5"></a><a class="code" href="classitk_1_1Command.html#aa63870ad4b3927aaf128866ef161b208">Execute</a>(<a name="_a6"></a><a class="code" href="classitk_1_1Object.html">itk::Object</a> * caller, <span class="keyword">const</span> <a name="_a7"></a><a class="code" href="classitk_1_1EventObject.html">itk::EventObject</a> &amp; event)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">  </span>{</div>
<div class="line">    <a class="code" href="classitk_1_1Command.html#aa63870ad4b3927aaf128866ef161b208">Execute</a>((<span class="keyword">const</span> <a class="code" href="classitk_1_1Object.html">itk::Object</a> *)caller, event);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span></div>
<div class="line">  <a class="code" href="classitk_1_1Command.html#aa63870ad4b3927aaf128866ef161b208">Execute</a>(<span class="keyword">const</span> <a class="code" href="classitk_1_1Object.html">itk::Object</a> * <span class="keywordtype">object</span>, <span class="keyword">const</span> <a class="code" href="classitk_1_1EventObject.html">itk::EventObject</a> &amp; event)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">  </span>{</div>
<div class="line">    <span class="keyword">auto</span> optimizer = <span class="keyword">static_cast&lt;</span>OptimizerPointer<span class="keyword">&gt;</span>(object);</div>
<div class="line">    <span class="keywordflow">if</span> (!(itk::IterationEvent().CheckEvent(&amp;event)))</div>
<div class="line">    {</div>
<div class="line">      <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">    std::cout &lt;&lt; optimizer-&gt;GetCurrentIteration() &lt;&lt; <span class="stringliteral">&quot;   &quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; optimizer-&gt;GetValue() &lt;&lt; <span class="stringliteral">&quot;   &quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; std::endl;</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[])</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (argc &lt; 4)</div>
<div class="line">  {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Missing Parameters &quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Usage: &quot;</span> &lt;&lt; argv[0];</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot; fixedImageFile  movingImageFile outputImagefile  &quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot; [differenceOutputfile] [differenceBeforeRegistration] &quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot; [filenameForFinalTransformParameters] &quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot; [useExplicitPDFderivatives ] [useCachingBSplineWeights ] &quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot; [deformationField] &quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot; [numberOfGridNodesInsideImageInOneDimensionCoarse] &quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot; [numberOfGridNodesInsideImageInOneDimensionFine] &quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot; [maximumStepLength] [maximumNumberOfIterations]&quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; std::endl;</div>
<div class="line">    <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  constexpr <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ImageDimension = 3;</div>
<div class="line">  <span class="keyword">using</span> PixelType = <span class="keywordtype">signed</span> short;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> FixedImageType = <a name="_a8"></a><a class="code" href="classitk_1_1Image.html">itk::Image&lt;PixelType, ImageDimension&gt;</a>;</div>
<div class="line">  <span class="keyword">using</span> MovingImageType = <a class="code" href="classitk_1_1Image.html">itk::Image&lt;PixelType, ImageDimension&gt;</a>;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> SpaceDimension = ImageDimension;</div>
<div class="line"> </div>
<div class="line">  constexpr <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> SplineOrder = 3;</div>
<div class="line">  <span class="keyword">using</span> CoordinateRepType = double;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> RigidTransformType = <a name="_a9"></a><a class="code" href="classitk_1_1VersorRigid3DTransform.html">itk::VersorRigid3DTransform&lt;double&gt;</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> AffineTransformType = <a name="_a10"></a><a class="code" href="classitk_1_1AffineTransform.html">itk::AffineTransform&lt;double, SpaceDimension&gt;</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> DeformableTransformType =</div>
<div class="line">    <a name="_a11"></a><a class="code" href="classitk_1_1BSplineTransform.html">itk::BSplineTransform&lt;CoordinateRepType, SpaceDimension, SplineOrder&gt;</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> TransformInitializerType =</div>
<div class="line">    <a name="_a12"></a><a class="code" href="classitk_1_1CenteredTransformInitializer.html">itk::CenteredTransformInitializer</a>&lt;RigidTransformType,</div>
<div class="line">                                      FixedImageType,</div>
<div class="line">                                      MovingImageType&gt;;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> OptimizerType = <a class="code" href="classitk_1_1RegularStepGradientDescentOptimizer.html">itk::RegularStepGradientDescentOptimizer</a>;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> MetricType =</div>
<div class="line">    <a name="_a13"></a><a class="code" href="classitk_1_1MattesMutualInformationImageToImageMetric.html">itk::MattesMutualInformationImageToImageMetric</a>&lt;FixedImageType,</div>
<div class="line">                                                   MovingImageType&gt;;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> InterpolatorType =</div>
<div class="line">    <a name="_a14"></a><a class="code" href="classitk_1_1LinearInterpolateImageFunction.html">itk::LinearInterpolateImageFunction&lt;MovingImageType, double&gt;</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> RegistrationType =</div>
<div class="line">    <a name="_a15"></a><a class="code" href="classitk_1_1ImageRegistrationMethod.html">itk::ImageRegistrationMethod&lt;FixedImageType, MovingImageType&gt;</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> metric = <a name="a16"></a><a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">MetricType::New</a>();</div>
<div class="line">  <span class="keyword">auto</span> optimizer = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">OptimizerType::New</a>();</div>
<div class="line">  <span class="keyword">auto</span> interpolator = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">InterpolatorType::New</a>();</div>
<div class="line">  <span class="keyword">auto</span> registration = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">RegistrationType::New</a>();</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  registration-&gt;SetMetric(metric);</div>
<div class="line">  registration-&gt;SetOptimizer(optimizer);</div>
<div class="line">  registration-&gt;SetInterpolator(interpolator);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Auxiliary identity transform.</span></div>
<div class="line">  <span class="keyword">using</span> IdentityTransformType =</div>
<div class="line">    <a name="_a17"></a><a class="code" href="classitk_1_1IdentityTransform.html">itk::IdentityTransform&lt;double, SpaceDimension&gt;</a>;</div>
<div class="line">  <span class="keyword">auto</span> identityTransform = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">IdentityTransformType::New</a>();</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="comment">//   Read the Fixed and Moving images.</span></div>
<div class="line">  <span class="keyword">using</span> FixedImageReaderType = <a name="_a18"></a><a class="code" href="classitk_1_1ImageFileReader.html">itk::ImageFileReader&lt;FixedImageType&gt;</a>;</div>
<div class="line">  <span class="keyword">using</span> MovingImageReaderType = <a class="code" href="classitk_1_1ImageFileReader.html">itk::ImageFileReader&lt;MovingImageType&gt;</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> fixedImageReader = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">FixedImageReaderType::New</a>();</div>
<div class="line">  <span class="keyword">auto</span> movingImageReader = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">MovingImageReaderType::New</a>();</div>
<div class="line"> </div>
<div class="line">  fixedImageReader-&gt;SetFileName(argv[1]);</div>
<div class="line">  movingImageReader-&gt;SetFileName(argv[2]);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">try</span></div>
<div class="line">  {</div>
<div class="line">    fixedImageReader-&gt;Update();</div>
<div class="line">    movingImageReader-&gt;Update();</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">catch</span> (<span class="keyword">const</span> itk::ExceptionObject &amp; err)</div>
<div class="line">  {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;ExceptionObject caught !&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cerr &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line">    <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <a name="a19"></a><a class="code" href="itkAddImageFilter_8h.html#a2f58dcf154217e9a950e9621f60e4339">FixedImageType::ConstPointer</a> fixedImage = fixedImageReader-&gt;GetOutput();</div>
<div class="line"> </div>
<div class="line">  registration-&gt;SetFixedImage(fixedImage);</div>
<div class="line">  registration-&gt;SetMovingImage(movingImageReader-&gt;GetOutput());</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Add a time and memory probes collector for profiling the computation time</span></div>
<div class="line">  <span class="comment">// of every stage.</span></div>
<div class="line">  <a name="_a20"></a><a class="code" href="classitk_1_1TimeProbesCollectorBase.html">itk::TimeProbesCollectorBase</a>   chronometer;</div>
<div class="line">  <a name="_a21"></a><a class="code" href="classitk_1_1MemoryProbesCollectorBase.html">itk::MemoryProbesCollectorBase</a> memorymeter;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Setup the metric parameters</span></div>
<div class="line">  metric-&gt;SetNumberOfHistogramBins(50);</div>
<div class="line"> </div>
<div class="line">  <a name="a22"></a><a class="code" href="namespaceitk_1_1GTest_1_1TypedefsAndConstructors_1_1Dimension2.html#a11afc1c40aa6161a6e22aec177054371">FixedImageType::RegionType</a> fixedRegion = fixedImage-&gt;GetBufferedRegion();</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numberOfPixels = fixedRegion.<a name="a23"></a><a class="code" href="classitk_1_1ImageRegion.html#a3869e176baeb0833cc46def514f0a46f">GetNumberOfPixels</a>();</div>
<div class="line"> </div>
<div class="line">  metric-&gt;ReinitializeSeed(76926294);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (argc &gt; 7)</div>
<div class="line">  {</div>
<div class="line">    <span class="comment">// Define whether to calculate the metric derivative by explicitly</span></div>
<div class="line">    <span class="comment">// computing the derivatives of the joint PDF with respect to the</span></div>
<div class="line">    <span class="comment">// Transform parameters, or doing it by progressively accumulating</span></div>
<div class="line">    <span class="comment">// contributions from each bin in the joint PDF.</span></div>
<div class="line">    metric-&gt;SetUseExplicitPDFDerivatives(std::stoi(argv[7]));</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (argc &gt; 8)</div>
<div class="line">  {</div>
<div class="line">    <span class="comment">// Define whether to cache the BSpline weights and indexes corresponding</span></div>
<div class="line">    <span class="comment">// to each one of the samples used to compute the metric. Enabling caching</span></div>
<div class="line">    <span class="comment">// will make the algorithm run faster but it will have a cost on the</span></div>
<div class="line">    <span class="comment">// amount of memory that needs to be allocated. This option is only</span></div>
<div class="line">    <span class="comment">// relevant when using the BSplineTransform.</span></div>
<div class="line">    metric-&gt;SetUseCachingOfBSplineWeights(std::stoi(argv[8]));</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="comment">//  Initialize a rigid transform by using Image Intensity Moments</span></div>
<div class="line">  <span class="keyword">auto</span> initializer = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">TransformInitializerType::New</a>();</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> rigidTransform = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">RigidTransformType::New</a>();</div>
<div class="line"> </div>
<div class="line">  initializer-&gt;SetTransform(rigidTransform);</div>
<div class="line">  initializer-&gt;SetFixedImage(fixedImageReader-&gt;GetOutput());</div>
<div class="line">  initializer-&gt;SetMovingImage(movingImageReader-&gt;GetOutput());</div>
<div class="line">  initializer-&gt;MomentsOn();</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Starting Rigid Transform Initialization &quot;</span> &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">  memorymeter.<a name="a24"></a><a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#a3a334272a956025a6147e9a25073dbe9">Start</a>(<span class="stringliteral">&quot;Rigid Initialization&quot;</span>);</div>
<div class="line">  chronometer.<a name="a25"></a><a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#a3a334272a956025a6147e9a25073dbe9">Start</a>(<span class="stringliteral">&quot;Rigid Initialization&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  initializer-&gt;InitializeTransform();</div>
<div class="line"> </div>
<div class="line">  chronometer.<a name="a26"></a><a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#ad3ebbd4d6157b8a148ba21bc88e0842b">Stop</a>(<span class="stringliteral">&quot;Rigid Initialization&quot;</span>);</div>
<div class="line">  memorymeter.<a name="a27"></a><a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#ad3ebbd4d6157b8a148ba21bc88e0842b">Stop</a>(<span class="stringliteral">&quot;Rigid Initialization&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Rigid Transform Initialization completed&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  std::cout &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">  registration-&gt;SetFixedImageRegion(fixedRegion);</div>
<div class="line">  registration-&gt;SetInitialTransformParameters(</div>
<div class="line">    rigidTransform-&gt;GetParameters());</div>
<div class="line"> </div>
<div class="line">  registration-&gt;SetTransform(rigidTransform);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">//  Define optimizer normalization to compensate for different dynamic range</span></div>
<div class="line">  <span class="comment">//  of rotations and translations.</span></div>
<div class="line">  <span class="keyword">using</span> OptimizerScalesType = OptimizerType::ScalesType;</div>
<div class="line">  OptimizerScalesType optimizerScales(</div>
<div class="line">    rigidTransform-&gt;GetNumberOfParameters());</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> translationScale = 1.0 / 1000.0;</div>
<div class="line"> </div>
<div class="line">  optimizerScales[0] = 1.0;</div>
<div class="line">  optimizerScales[1] = 1.0;</div>
<div class="line">  optimizerScales[2] = 1.0;</div>
<div class="line">  optimizerScales[3] = translationScale;</div>
<div class="line">  optimizerScales[4] = translationScale;</div>
<div class="line">  optimizerScales[5] = translationScale;</div>
<div class="line"> </div>
<div class="line">  optimizer-&gt;SetScales(optimizerScales);</div>
<div class="line"> </div>
<div class="line">  optimizer-&gt;SetMaximumStepLength(0.2000);</div>
<div class="line">  optimizer-&gt;SetMinimumStepLength(0.0001);</div>
<div class="line"> </div>
<div class="line">  optimizer-&gt;SetNumberOfIterations(200);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// The rigid transform has 6 parameters we use therefore a few samples to</span></div>
<div class="line">  <span class="comment">// run this stage.</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Regulating the number of samples in the Metric is equivalent to</span></div>
<div class="line">  <span class="comment">// performing multi-resolution registration because it is indeed a</span></div>
<div class="line">  <span class="comment">// sub-sampling of the image.</span></div>
<div class="line">  metric-&gt;SetNumberOfSpatialSamples(10000L);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create the Command observer and register it with the optimizer.</span></div>
<div class="line">  <span class="keyword">auto</span> observer = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">CommandIterationUpdate::New</a>();</div>
<div class="line">  optimizer-&gt;AddObserver(itk::IterationEvent(), observer);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Starting Rigid Registration &quot;</span> &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">try</span></div>
<div class="line">  {</div>
<div class="line">    memorymeter.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#a3a334272a956025a6147e9a25073dbe9">Start</a>(<span class="stringliteral">&quot;Rigid Registration&quot;</span>);</div>
<div class="line">    chronometer.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#a3a334272a956025a6147e9a25073dbe9">Start</a>(<span class="stringliteral">&quot;Rigid Registration&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    registration-&gt;Update();</div>
<div class="line"> </div>
<div class="line">    chronometer.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#ad3ebbd4d6157b8a148ba21bc88e0842b">Stop</a>(<span class="stringliteral">&quot;Rigid Registration&quot;</span>);</div>
<div class="line">    memorymeter.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#ad3ebbd4d6157b8a148ba21bc88e0842b">Stop</a>(<span class="stringliteral">&quot;Rigid Registration&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Optimizer stop condition = &quot;</span></div>
<div class="line">              &lt;&lt; registration-&gt;GetOptimizer()-&gt;GetStopConditionDescription()</div>
<div class="line">              &lt;&lt; std::endl;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">catch</span> (<span class="keyword">const</span> itk::ExceptionObject &amp; err)</div>
<div class="line">  {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;ExceptionObject caught !&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cerr &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line">    <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Rigid Registration completed&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  std::cout &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">  rigidTransform-&gt;SetParameters(registration-&gt;GetLastTransformParameters());</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="comment">//  Perform Affine Registration</span></div>
<div class="line">  <span class="keyword">auto</span> affineTransform = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">AffineTransformType::New</a>();</div>
<div class="line"> </div>
<div class="line">  affineTransform-&gt;SetCenter(rigidTransform-&gt;GetCenter());</div>
<div class="line">  affineTransform-&gt;SetTranslation(rigidTransform-&gt;GetTranslation());</div>
<div class="line">  affineTransform-&gt;SetMatrix(rigidTransform-&gt;GetMatrix());</div>
<div class="line"> </div>
<div class="line">  registration-&gt;SetTransform(affineTransform);</div>
<div class="line">  registration-&gt;SetInitialTransformParameters(</div>
<div class="line">    affineTransform-&gt;GetParameters());</div>
<div class="line"> </div>
<div class="line">  optimizerScales =</div>
<div class="line">    OptimizerScalesType(affineTransform-&gt;GetNumberOfParameters());</div>
<div class="line"> </div>
<div class="line">  optimizerScales[0] = 1.0;</div>
<div class="line">  optimizerScales[1] = 1.0;</div>
<div class="line">  optimizerScales[2] = 1.0;</div>
<div class="line">  optimizerScales[3] = 1.0;</div>
<div class="line">  optimizerScales[4] = 1.0;</div>
<div class="line">  optimizerScales[5] = 1.0;</div>
<div class="line">  optimizerScales[6] = 1.0;</div>
<div class="line">  optimizerScales[7] = 1.0;</div>
<div class="line">  optimizerScales[8] = 1.0;</div>
<div class="line"> </div>
<div class="line">  optimizerScales[9] = translationScale;</div>
<div class="line">  optimizerScales[10] = translationScale;</div>
<div class="line">  optimizerScales[11] = translationScale;</div>
<div class="line"> </div>
<div class="line">  optimizer-&gt;SetScales(optimizerScales);</div>
<div class="line"> </div>
<div class="line">  optimizer-&gt;SetMaximumStepLength(0.2000);</div>
<div class="line">  optimizer-&gt;SetMinimumStepLength(0.0001);</div>
<div class="line"> </div>
<div class="line">  optimizer-&gt;SetNumberOfIterations(200);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// The Affine transform has 12 parameters we use therefore a more samples to</span></div>
<div class="line">  <span class="comment">// run this stage.</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Regulating the number of samples in the Metric is equivalent to</span></div>
<div class="line">  <span class="comment">// performing multi-resolution registration because it is indeed a</span></div>
<div class="line">  <span class="comment">// sub-sampling of the image.</span></div>
<div class="line">  metric-&gt;SetNumberOfSpatialSamples(50000L);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Starting Affine Registration &quot;</span> &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">try</span></div>
<div class="line">  {</div>
<div class="line">    memorymeter.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#a3a334272a956025a6147e9a25073dbe9">Start</a>(<span class="stringliteral">&quot;Affine Registration&quot;</span>);</div>
<div class="line">    chronometer.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#a3a334272a956025a6147e9a25073dbe9">Start</a>(<span class="stringliteral">&quot;Affine Registration&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    registration-&gt;Update();</div>
<div class="line"> </div>
<div class="line">    chronometer.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#ad3ebbd4d6157b8a148ba21bc88e0842b">Stop</a>(<span class="stringliteral">&quot;Affine Registration&quot;</span>);</div>
<div class="line">    memorymeter.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#ad3ebbd4d6157b8a148ba21bc88e0842b">Stop</a>(<span class="stringliteral">&quot;Affine Registration&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">catch</span> (<span class="keyword">const</span> itk::ExceptionObject &amp; err)</div>
<div class="line">  {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;ExceptionObject caught !&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cerr &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line">    <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Affine Registration completed&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  std::cout &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">  affineTransform-&gt;SetParameters(registration-&gt;GetLastTransformParameters());</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="comment">//  Perform Deformable Registration</span></div>
<div class="line">  <span class="keyword">auto</span> bsplineTransformCoarse = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">DeformableTransformType::New</a>();</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numberOfGridNodesInOneDimensionCoarse = 5;</div>
<div class="line"> </div>
<div class="line">  DeformableTransformType::PhysicalDimensionsType fixedPhysicalDimensions;</div>
<div class="line">  DeformableTransformType::MeshSizeType           meshSize;</div>
<div class="line">  DeformableTransformType::OriginType             fixedOrigin;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; SpaceDimension; ++i)</div>
<div class="line">  {</div>
<div class="line">    fixedOrigin[i] = fixedImage-&gt;GetOrigin()[i];</div>
<div class="line">    fixedPhysicalDimensions[i] =</div>
<div class="line">      fixedImage-&gt;GetSpacing()[i] *</div>
<div class="line">      <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(</div>
<div class="line">        fixedImage-&gt;GetLargestPossibleRegion().GetSize()[i] - 1);</div>
<div class="line">  }</div>
<div class="line">  meshSize.Fill(numberOfGridNodesInOneDimensionCoarse - SplineOrder);</div>
<div class="line"> </div>
<div class="line">  bsplineTransformCoarse-&gt;SetTransformDomainOrigin(fixedOrigin);</div>
<div class="line">  bsplineTransformCoarse-&gt;SetTransformDomainPhysicalDimensions(</div>
<div class="line">    fixedPhysicalDimensions);</div>
<div class="line">  bsplineTransformCoarse-&gt;SetTransformDomainMeshSize(meshSize);</div>
<div class="line">  bsplineTransformCoarse-&gt;SetTransformDomainDirection(</div>
<div class="line">    fixedImage-&gt;GetDirection());</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> ParametersType = DeformableTransformType::ParametersType;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numberOfBSplineParameters =</div>
<div class="line">    bsplineTransformCoarse-&gt;GetNumberOfParameters();</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  optimizerScales = OptimizerScalesType(numberOfBSplineParameters);</div>
<div class="line">  optimizerScales.Fill(1.0);</div>
<div class="line"> </div>
<div class="line">  optimizer-&gt;SetScales(optimizerScales);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  ParametersType initialDeformableTransformParameters(</div>
<div class="line">    numberOfBSplineParameters);</div>
<div class="line">  initialDeformableTransformParameters.Fill(0.0);</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> CompositeTransformType =</div>
<div class="line">    <a name="_a28"></a><a class="code" href="classitk_1_1CompositeTransform.html">itk::CompositeTransform&lt;double, SpaceDimension&gt;</a>;</div>
<div class="line">  <span class="keyword">auto</span> compositeTransform = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">CompositeTransformType::New</a>();</div>
<div class="line">  compositeTransform-&gt;AddTransform(affineTransform);</div>
<div class="line">  compositeTransform-&gt;AddTransform(bsplineTransformCoarse);</div>
<div class="line">  compositeTransform-&gt;SetOnlyMostRecentTransformToOptimizeOn();</div>
<div class="line"> </div>
<div class="line">  bsplineTransformCoarse-&gt;SetParameters(initialDeformableTransformParameters);</div>
<div class="line"> </div>
<div class="line">  registration-&gt;SetInitialTransformParameters(</div>
<div class="line">    bsplineTransformCoarse-&gt;GetParameters());</div>
<div class="line">  registration-&gt;SetTransform(compositeTransform);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Software Guide : EndCodeSnippet</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="comment">//  Software Guide : BeginLatex</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">//  Next we set the parameters of the RegularStepGradientDescentOptimizer</span></div>
<div class="line">  <span class="comment">//  object.</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">//  Software Guide : EndLatex</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Software Guide : BeginCodeSnippet</span></div>
<div class="line">  optimizer-&gt;SetMaximumStepLength(10.0);</div>
<div class="line">  optimizer-&gt;SetMinimumStepLength(0.01);</div>
<div class="line"> </div>
<div class="line">  optimizer-&gt;SetRelaxationFactor(0.7);</div>
<div class="line">  optimizer-&gt;SetNumberOfIterations(50);</div>
<div class="line">  <span class="comment">// Software Guide : EndCodeSnippet</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Optionally, get the step length from the command line arguments</span></div>
<div class="line">  <span class="keywordflow">if</span> (argc &gt; 11)</div>
<div class="line">  {</div>
<div class="line">    optimizer-&gt;SetMaximumStepLength(std::stod(argv[12]));</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Optionally, get the number of iterations from the command line arguments</span></div>
<div class="line">  <span class="keywordflow">if</span> (argc &gt; 12)</div>
<div class="line">  {</div>
<div class="line">    optimizer-&gt;SetNumberOfIterations(std::stoi(argv[13]));</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="comment">// The BSpline transform has a large number of parameters, we use therefore</span></div>
<div class="line">  <span class="comment">// a much larger number of samples to run this stage.</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Regulating the number of samples in the Metric is equivalent to</span></div>
<div class="line">  <span class="comment">// performing multi-resolution registration because it is indeed a</span></div>
<div class="line">  <span class="comment">// sub-sampling of the image.</span></div>
<div class="line">  metric-&gt;SetNumberOfSpatialSamples(numberOfBSplineParameters * 100);</div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; std::endl</div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot;Starting Deformable Registration Coarse Grid&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">try</span></div>
<div class="line">  {</div>
<div class="line">    memorymeter.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#a3a334272a956025a6147e9a25073dbe9">Start</a>(<span class="stringliteral">&quot;Deformable Registration Coarse&quot;</span>);</div>
<div class="line">    chronometer.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#a3a334272a956025a6147e9a25073dbe9">Start</a>(<span class="stringliteral">&quot;Deformable Registration Coarse&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    registration-&gt;Update();</div>
<div class="line"> </div>
<div class="line">    chronometer.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#ad3ebbd4d6157b8a148ba21bc88e0842b">Stop</a>(<span class="stringliteral">&quot;Deformable Registration Coarse&quot;</span>);</div>
<div class="line">    memorymeter.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#ad3ebbd4d6157b8a148ba21bc88e0842b">Stop</a>(<span class="stringliteral">&quot;Deformable Registration Coarse&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">catch</span> (<span class="keyword">const</span> itk::ExceptionObject &amp; err)</div>
<div class="line">  {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;ExceptionObject caught !&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cerr &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line">    <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Deformable Registration Coarse Grid completed&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  std::cout &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">  OptimizerType::ParametersType finalParameters =</div>
<div class="line">    registration-&gt;GetLastTransformParameters();</div>
<div class="line"> </div>
<div class="line">  bsplineTransformCoarse-&gt;SetParameters(finalParameters);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">//  Software Guide : BeginLatex</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">//  Once the registration has finished with the low resolution grid, we</span></div>
<div class="line">  <span class="comment">//  proceed to instantiate a higher resolution</span></div>
<div class="line">  <span class="comment">//  \code{BSplineTransform}.</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">//  Software Guide : EndLatex</span></div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> bsplineTransformFine = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">DeformableTransformType::New</a>();</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numberOfGridNodesInOneDimensionFine = 20;</div>
<div class="line"> </div>
<div class="line">  meshSize.Fill(numberOfGridNodesInOneDimensionFine - SplineOrder);</div>
<div class="line"> </div>
<div class="line">  bsplineTransformFine-&gt;SetTransformDomainOrigin(fixedOrigin);</div>
<div class="line">  bsplineTransformFine-&gt;SetTransformDomainPhysicalDimensions(</div>
<div class="line">    fixedPhysicalDimensions);</div>
<div class="line">  bsplineTransformFine-&gt;SetTransformDomainMeshSize(meshSize);</div>
<div class="line">  bsplineTransformFine-&gt;SetTransformDomainDirection(</div>
<div class="line">    fixedImage-&gt;GetDirection());</div>
<div class="line"> </div>
<div class="line">  numberOfBSplineParameters = bsplineTransformFine-&gt;GetNumberOfParameters();</div>
<div class="line"> </div>
<div class="line">  ParametersType parametersHigh(numberOfBSplineParameters);</div>
<div class="line">  parametersHigh.Fill(0.0);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">//  Software Guide : BeginLatex</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">//  Now we need to initialize the BSpline coefficients of the higher</span></div>
<div class="line">  <span class="comment">//  resolution transform. This is done by first computing the actual</span></div>
<div class="line">  <span class="comment">//  deformation field at the higher resolution from the lower resolution</span></div>
<div class="line">  <span class="comment">//  BSpline coefficients. Then a BSpline decomposition is done to obtain the</span></div>
<div class="line">  <span class="comment">//  BSpline coefficient of the higher resolution transform.</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">//  Software Guide : EndLatex</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> counter = 0;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0; k &lt; SpaceDimension; ++k)</div>
<div class="line">  {</div>
<div class="line">    <span class="keyword">using</span> ParametersImageType = DeformableTransformType::ImageType;</div>
<div class="line">    <span class="keyword">using</span> ResamplerType =</div>
<div class="line">      <a name="_a29"></a><a class="code" href="classitk_1_1ResampleImageFilter.html">itk::ResampleImageFilter&lt;ParametersImageType, ParametersImageType&gt;</a>;</div>
<div class="line">    <span class="keyword">auto</span> upsampler = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">ResamplerType::New</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">using</span> FunctionType =</div>
<div class="line">      <a name="_a30"></a><a class="code" href="classitk_1_1BSplineResampleImageFunction.html">itk::BSplineResampleImageFunction&lt;ParametersImageType, double&gt;</a>;</div>
<div class="line">    <span class="keyword">auto</span> <span class="keyword">function</span> = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">FunctionType::New</a>();</div>
<div class="line"> </div>
<div class="line">    upsampler-&gt;SetInput(bsplineTransformCoarse-&gt;GetCoefficientImages()[k]);</div>
<div class="line">    upsampler-&gt;SetInterpolator(<span class="keyword">function</span>);</div>
<div class="line">    upsampler-&gt;SetTransform(identityTransform);</div>
<div class="line">    upsampler-&gt;SetSize(bsplineTransformFine-&gt;GetCoefficientImages()[k]</div>
<div class="line">                         -&gt;GetLargestPossibleRegion()</div>
<div class="line">                         .GetSize());</div>
<div class="line">    upsampler-&gt;SetOutputSpacing(</div>
<div class="line">      bsplineTransformFine-&gt;GetCoefficientImages()[k]-&gt;GetSpacing());</div>
<div class="line">    upsampler-&gt;SetOutputOrigin(</div>
<div class="line">      bsplineTransformFine-&gt;GetCoefficientImages()[k]-&gt;GetOrigin());</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">using</span> DecompositionType =</div>
<div class="line">      <a name="_a31"></a><a class="code" href="classitk_1_1BSplineDecompositionImageFilter.html">itk::BSplineDecompositionImageFilter</a>&lt;ParametersImageType,</div>
<div class="line">                                           ParametersImageType&gt;;</div>
<div class="line">    <span class="keyword">auto</span> decomposition = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">DecompositionType::New</a>();</div>
<div class="line"> </div>
<div class="line">    decomposition-&gt;SetSplineOrder(SplineOrder);</div>
<div class="line">    decomposition-&gt;SetInput(upsampler-&gt;GetOutput());</div>
<div class="line">    decomposition-&gt;Update();</div>
<div class="line"> </div>
<div class="line">    <a name="a32"></a><a class="code" href="itkAddImageFilter_8h.html#ac831674d6d3f7cd2148ae944cbaa7c9d">ParametersImageType::Pointer</a> newCoefficients = decomposition-&gt;GetOutput();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// copy the coefficients into the parameter array</span></div>
<div class="line">    <span class="keyword">using</span> Iterator = <a name="_a33"></a><a class="code" href="classitk_1_1ImageRegionIterator.html">itk::ImageRegionIterator&lt;ParametersImageType&gt;</a>;</div>
<div class="line">    Iterator it(newCoefficients,</div>
<div class="line">                bsplineTransformFine-&gt;GetCoefficientImages()[k]</div>
<div class="line">                  -&gt;GetLargestPossibleRegion());</div>
<div class="line">    <span class="keywordflow">while</span> (!it.IsAtEnd())</div>
<div class="line">    {</div>
<div class="line">      parametersHigh[counter++] = it.Get();</div>
<div class="line">      ++it;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  optimizerScales = OptimizerScalesType(numberOfBSplineParameters);</div>
<div class="line">  optimizerScales.Fill(1.0);</div>
<div class="line"> </div>
<div class="line">  optimizer-&gt;SetScales(optimizerScales);</div>
<div class="line"> </div>
<div class="line">  bsplineTransformFine-&gt;SetParameters(parametersHigh);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">//  Software Guide : BeginLatex</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">//  We now pass the parameters of the high resolution transform as the</span></div>
<div class="line">  <span class="comment">//  initial parameters to be used in a second stage of the registration</span></div>
<div class="line">  <span class="comment">//  process.</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">//  Software Guide : EndLatex</span></div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Starting Registration with high resolution transform&quot;</span></div>
<div class="line">            &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Software Guide : BeginCodeSnippet</span></div>
<div class="line">  compositeTransform-&gt;RemoveTransform(); <span class="comment">// remove bsplineTransformCoarse</span></div>
<div class="line">  compositeTransform-&gt;AddTransform(bsplineTransformFine);</div>
<div class="line">  compositeTransform-&gt;SetOnlyMostRecentTransformToOptimizeOn();</div>
<div class="line">  registration-&gt;SetInitialTransformParameters(</div>
<div class="line">    bsplineTransformFine-&gt;GetParameters());</div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// The BSpline transform at fine scale has a very large number of</span></div>
<div class="line">  <span class="comment">// parameters, we use therefore a much larger number of samples to run this</span></div>
<div class="line">  <span class="comment">// stage. In this case, however, the number of transform parameters is</span></div>
<div class="line">  <span class="comment">// closer to the number of pixels in the image. Therefore we use the</span></div>
<div class="line">  <span class="comment">// geometric mean of the two numbers to ensure that the number of samples is</span></div>
<div class="line">  <span class="comment">// larger than the number of transform parameters and smaller than the</span></div>
<div class="line">  <span class="comment">// number of samples.</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Regulating the number of samples in the Metric is equivalent to</span></div>
<div class="line">  <span class="comment">// performing multi-resolution registration because it is indeed a</span></div>
<div class="line">  <span class="comment">// sub-sampling of the image.</span></div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> numberOfSamples = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span><span class="keyword">&gt;</span>(</div>
<div class="line">    std::sqrt(<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(numberOfBSplineParameters) *</div>
<div class="line">              <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(numberOfPixels)));</div>
<div class="line">  metric-&gt;SetNumberOfSpatialSamples(numberOfSamples);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">try</span></div>
<div class="line">  {</div>
<div class="line">    memorymeter.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#a3a334272a956025a6147e9a25073dbe9">Start</a>(<span class="stringliteral">&quot;Deformable Registration Fine&quot;</span>);</div>
<div class="line">    chronometer.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#a3a334272a956025a6147e9a25073dbe9">Start</a>(<span class="stringliteral">&quot;Deformable Registration Fine&quot;</span>);</div>
<div class="line">    registration-&gt;Update();</div>
<div class="line">    chronometer.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#ad3ebbd4d6157b8a148ba21bc88e0842b">Stop</a>(<span class="stringliteral">&quot;Deformable Registration Fine&quot;</span>);</div>
<div class="line">    memorymeter.<a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#ad3ebbd4d6157b8a148ba21bc88e0842b">Stop</a>(<span class="stringliteral">&quot;Deformable Registration Fine&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">catch</span> (<span class="keyword">const</span> itk::ExceptionObject &amp; err)</div>
<div class="line">  {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;ExceptionObject caught !&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cerr &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line">    <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Software Guide : EndCodeSnippet</span></div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Deformable Registration Fine Grid completed&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  std::cout &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Report the time and memory taken by the registration</span></div>
<div class="line">  chronometer.<a name="a34"></a><a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#ab65df5ccc88ce6815f0498dc83aea0ad">Report</a>(std::cout);</div>
<div class="line">  memorymeter.<a name="a35"></a><a class="code" href="classitk_1_1ResourceProbesCollectorBase.html#ab65df5ccc88ce6815f0498dc83aea0ad">Report</a>(std::cout);</div>
<div class="line"> </div>
<div class="line">  finalParameters = registration-&gt;GetLastTransformParameters();</div>
<div class="line"> </div>
<div class="line">  bsplineTransformFine-&gt;SetParameters(finalParameters);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> ResampleFilterType =</div>
<div class="line">    <a class="code" href="classitk_1_1ResampleImageFilter.html">itk::ResampleImageFilter&lt;MovingImageType, FixedImageType&gt;</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> resample = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">ResampleFilterType::New</a>();</div>
<div class="line"> </div>
<div class="line">  resample-&gt;SetTransform(bsplineTransformFine);</div>
<div class="line">  resample-&gt;SetInput(movingImageReader-&gt;GetOutput());</div>
<div class="line"> </div>
<div class="line">  resample-&gt;SetSize(fixedImage-&gt;GetLargestPossibleRegion().GetSize());</div>
<div class="line">  resample-&gt;SetOutputOrigin(fixedImage-&gt;GetOrigin());</div>
<div class="line">  resample-&gt;SetOutputSpacing(fixedImage-&gt;GetSpacing());</div>
<div class="line">  resample-&gt;SetOutputDirection(fixedImage-&gt;GetDirection());</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// This value is set to zero in order to make easier to perform</span></div>
<div class="line">  <span class="comment">// regression testing in this example. However, for didactic</span></div>
<div class="line">  <span class="comment">// exercise it will be better to set it to a medium gray value</span></div>
<div class="line">  <span class="comment">// such as 100 or 128.</span></div>
<div class="line">  resample-&gt;SetDefaultPixelValue(0);</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> OutputPixelType = <span class="keywordtype">signed</span> short;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> OutputImageType = <a class="code" href="classitk_1_1Image.html">itk::Image&lt;OutputPixelType, ImageDimension&gt;</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> CastFilterType =</div>
<div class="line">    <a name="_a36"></a><a class="code" href="classitk_1_1CastImageFilter.html">itk::CastImageFilter&lt;FixedImageType, OutputImageType&gt;</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> WriterType = <a name="_a37"></a><a class="code" href="classitk_1_1ImageFileWriter.html">itk::ImageFileWriter&lt;OutputImageType&gt;</a>;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> writer = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">WriterType::New</a>();</div>
<div class="line">  <span class="keyword">auto</span> caster = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">CastFilterType::New</a>();</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  writer-&gt;SetFileName(argv[3]);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  caster-&gt;SetInput(resample-&gt;GetOutput());</div>
<div class="line">  writer-&gt;SetInput(caster-&gt;GetOutput());</div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Writing resampled moving image...&quot;</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">try</span></div>
<div class="line">  {</div>
<div class="line">    writer-&gt;Update();</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">catch</span> (<span class="keyword">const</span> itk::ExceptionObject &amp; err)</div>
<div class="line">  {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;ExceptionObject caught !&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cerr &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line">    <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot; Done!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> DifferenceFilterType =</div>
<div class="line">    <a name="_a38"></a><a class="code" href="classitk_1_1SquaredDifferenceImageFilter.html">itk::SquaredDifferenceImageFilter</a>&lt;FixedImageType,</div>
<div class="line">                                      FixedImageType,</div>
<div class="line">                                      OutputImageType&gt;;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> difference = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">DifferenceFilterType::New</a>();</div>
<div class="line">  <span class="keyword">using</span> SqrtFilterType =</div>
<div class="line">    <a name="_a39"></a><a class="code" href="classitk_1_1SqrtImageFilter.html">itk::SqrtImageFilter&lt;OutputImageType, OutputImageType&gt;</a>;</div>
<div class="line">  <span class="keyword">auto</span> sqrtFilter = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">SqrtFilterType::New</a>();</div>
<div class="line">  sqrtFilter-&gt;SetInput(difference-&gt;GetOutput());</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">using</span> DifferenceImageWriterType = <a class="code" href="classitk_1_1ImageFileWriter.html">itk::ImageFileWriter&lt;OutputImageType&gt;</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> writer2 = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">DifferenceImageWriterType::New</a>();</div>
<div class="line">  writer2-&gt;SetInput(sqrtFilter-&gt;GetOutput());</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Compute the difference image between the</span></div>
<div class="line">  <span class="comment">// fixed and resampled moving image.</span></div>
<div class="line">  <span class="keywordflow">if</span> (argc &gt; 4)</div>
<div class="line">  {</div>
<div class="line">    difference-&gt;SetInput1(fixedImageReader-&gt;GetOutput());</div>
<div class="line">    difference-&gt;SetInput2(resample-&gt;GetOutput());</div>
<div class="line">    writer2-&gt;SetFileName(argv[4]);</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Writing difference image after registration...&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">      writer2-&gt;Update();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<span class="keyword">const</span> itk::ExceptionObject &amp; err)</div>
<div class="line">    {</div>
<div class="line">      std::cerr &lt;&lt; <span class="stringliteral">&quot;ExceptionObject caught !&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">      std::cerr &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line">      <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot; Done!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Compute the difference image between the</span></div>
<div class="line">  <span class="comment">// fixed and moving image before registration.</span></div>
<div class="line">  <span class="keywordflow">if</span> (argc &gt; 5)</div>
<div class="line">  {</div>
<div class="line">    writer2-&gt;SetFileName(argv[5]);</div>
<div class="line">    difference-&gt;SetInput1(fixedImageReader-&gt;GetOutput());</div>
<div class="line">    resample-&gt;SetTransform(identityTransform);</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Writing difference image before registration...&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">      writer2-&gt;Update();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<span class="keyword">const</span> itk::ExceptionObject &amp; err)</div>
<div class="line">    {</div>
<div class="line">      std::cerr &lt;&lt; <span class="stringliteral">&quot;ExceptionObject caught !&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">      std::cerr &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line">      <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot; Done!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Generate the explicit deformation field resulting from</span></div>
<div class="line">  <span class="comment">// the registration.</span></div>
<div class="line">  <span class="keywordflow">if</span> (argc &gt; 9)</div>
<div class="line">  {</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">using</span> <a name="a40"></a><a class="code" href="namespaceitk_1_1GTest_1_1TypedefsAndConstructors_1_1Dimension2.html#afc9b2e09ca815e90af469040c64abd94">VectorType</a> = <a name="_a41"></a><a class="code" href="classitk_1_1Vector.html">itk::Vector&lt;float, ImageDimension&gt;</a>;</div>
<div class="line">    <span class="keyword">using</span> DisplacementFieldType = <a class="code" href="classitk_1_1Image.html">itk::Image&lt;VectorType, ImageDimension&gt;</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> field = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">DisplacementFieldType::New</a>();</div>
<div class="line">    field-&gt;SetRegions(fixedRegion);</div>
<div class="line">    field-&gt;SetOrigin(fixedImage-&gt;GetOrigin());</div>
<div class="line">    field-&gt;SetSpacing(fixedImage-&gt;GetSpacing());</div>
<div class="line">    field-&gt;SetDirection(fixedImage-&gt;GetDirection());</div>
<div class="line">    field-&gt;Allocate();</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">using</span> FieldIterator = <a class="code" href="classitk_1_1ImageRegionIterator.html">itk::ImageRegionIterator&lt;DisplacementFieldType&gt;</a>;</div>
<div class="line">    FieldIterator fi(field, fixedRegion);</div>
<div class="line"> </div>
<div class="line">    fi.GoToBegin();</div>
<div class="line"> </div>
<div class="line">    DeformableTransformType::InputPointType  fixedPoint;</div>
<div class="line">    DeformableTransformType::OutputPointType movingPoint;</div>
<div class="line">    <a name="a42"></a><a class="code" href="namespaceitk_1_1GTest_1_1TypedefsAndConstructors_1_1Dimension2.html#a246a71b35a903d08cb4d0aec86f6f366">DisplacementFieldType::IndexType</a>         index;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="namespaceitk_1_1GTest_1_1TypedefsAndConstructors_1_1Dimension2.html#afc9b2e09ca815e90af469040c64abd94">VectorType</a> displacement;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (!fi.IsAtEnd())</div>
<div class="line">    {</div>
<div class="line">      index = fi.GetIndex();</div>
<div class="line">      field-&gt;TransformIndexToPhysicalPoint(index, fixedPoint);</div>
<div class="line">      movingPoint = bsplineTransformFine-&gt;TransformPoint(fixedPoint);</div>
<div class="line">      displacement = movingPoint - fixedPoint;</div>
<div class="line">      fi.Set(displacement);</div>
<div class="line">      ++fi;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">using</span> FieldWriterType = <a class="code" href="classitk_1_1ImageFileWriter.html">itk::ImageFileWriter&lt;DisplacementFieldType&gt;</a>;</div>
<div class="line">    <span class="keyword">auto</span> fieldWriter = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">FieldWriterType::New</a>();</div>
<div class="line"> </div>
<div class="line">    fieldWriter-&gt;SetInput(field);</div>
<div class="line"> </div>
<div class="line">    fieldWriter-&gt;SetFileName(argv[9]);</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Writing deformation field ...&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">      fieldWriter-&gt;Update();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<span class="keyword">const</span> itk::ExceptionObject &amp; excp)</div>
<div class="line">    {</div>
<div class="line">      std::cerr &lt;&lt; <span class="stringliteral">&quot;Exception thrown &quot;</span> &lt;&lt; std::endl;</div>
<div class="line">      std::cerr &lt;&lt; excp &lt;&lt; std::endl;</div>
<div class="line">      <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot; Done!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Optionally, save the transform parameters in a file</span></div>
<div class="line">  <span class="keywordflow">if</span> (argc &gt; 6)</div>
<div class="line">  {</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Writing transform parameter file ...&quot;</span>;</div>
<div class="line">    <span class="keyword">using</span> TransformWriterType = <a name="a43"></a><a class="code" href="namespaceitk.html#ac934724a2f28e702e215ad36f6f3bf08">itk::TransformFileWriter</a>;</div>
<div class="line">    <span class="keyword">auto</span> transformWriter = <a class="code" href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">TransformWriterType::New</a>();</div>
<div class="line">    transformWriter-&gt;AddTransform(bsplineTransformFine);</div>
<div class="line">    transformWriter-&gt;SetFileName(argv[6]);</div>
<div class="line">    transformWriter-&gt;Update();</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot; Done!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<div class="ttc" id="aitkAddImageFilter_8h_html_ac831674d6d3f7cd2148ae944cbaa7c9d"><div class="ttname"><a href="itkAddImageFilter_8h.html#ac831674d6d3f7cd2148ae944cbaa7c9d">Pointer</a></div><div class="ttdeci">SmartPointer&lt; Self &gt; Pointer</div><div class="ttdef"><b>Definition:</b> <a href="itkAddImageFilter_8h_source.html#l00092">itkAddImageFilter.h:92</a></div></div>
<div class="ttc" id="aclassitk_1_1CastImageFilter_html"><div class="ttname"><a href="classitk_1_1CastImageFilter.html">itk::CastImageFilter</a></div><div class="ttdoc">Casts input pixels to output pixel type.</div><div class="ttdef"><b>Definition:</b> <a href="itkCastImageFilter_8h_source.html#l00100">itkCastImageFilter.h:100</a></div></div>
<div class="ttc" id="aitkTimeProbesCollectorBase_8h_html"><div class="ttname"><a href="itkTimeProbesCollectorBase_8h.html">itkTimeProbesCollectorBase.h</a></div></div>
<div class="ttc" id="aclassitk_1_1SquaredDifferenceImageFilter_html"><div class="ttname"><a href="classitk_1_1SquaredDifferenceImageFilter.html">itk::SquaredDifferenceImageFilter</a></div><div class="ttdoc">Implements pixel-wise the computation of squared difference.</div><div class="ttdef"><b>Definition:</b> <a href="itkSquaredDifferenceImageFilter_8h_source.html#l00084">itkSquaredDifferenceImageFilter.h:84</a></div></div>
<div class="ttc" id="aitkAddImageFilter_8h_html_a2f58dcf154217e9a950e9621f60e4339"><div class="ttname"><a href="itkAddImageFilter_8h.html#a2f58dcf154217e9a950e9621f60e4339">ConstPointer</a></div><div class="ttdeci">SmartPointer&lt; const Self &gt; ConstPointer</div><div class="ttdef"><b>Definition:</b> <a href="itkAddImageFilter_8h_source.html#l00093">itkAddImageFilter.h:93</a></div></div>
<div class="ttc" id="aclassitk_1_1CompositeTransform_html"><div class="ttname"><a href="classitk_1_1CompositeTransform.html">itk::CompositeTransform</a></div><div class="ttdoc">This class contains a list of transforms and concatenates them by composition.</div><div class="ttdef"><b>Definition:</b> <a href="itkCompositeTransform_8h_source.html#l00087">itkCompositeTransform.h:87</a></div></div>
<div class="ttc" id="anamespaceitk_html_ac934724a2f28e702e215ad36f6f3bf08"><div class="ttname"><a href="namespaceitk.html#ac934724a2f28e702e215ad36f6f3bf08">itk::TransformFileWriter</a></div><div class="ttdeci">itk::TransformFileWriterTemplate&lt; double &gt; TransformFileWriter</div><div class="ttdef"><b>Definition:</b> <a href="itkTransformFileWriter_8h_source.html#l00129">itkTransformFileWriter.h:129</a></div></div>
<div class="ttc" id="aclassitk_1_1IdentityTransform_html"><div class="ttname"><a href="classitk_1_1IdentityTransform.html">itk::IdentityTransform</a></div><div class="ttdoc">Implementation of an Identity Transform.</div><div class="ttdef"><b>Definition:</b> <a href="itkIdentityTransform_8h_source.html#l00050">itkIdentityTransform.h:50</a></div></div>
<div class="ttc" id="aclassitk_1_1BSplineDecompositionImageFilter_html"><div class="ttname"><a href="classitk_1_1BSplineDecompositionImageFilter.html">itk::BSplineDecompositionImageFilter</a></div><div class="ttdoc">Calculates the B-Spline coefficients of an image. Spline order may be from 0 to 5.</div><div class="ttdef"><b>Definition:</b> <a href="itkBSplineDecompositionImageFilter_8h_source.html#l00074">itkBSplineDecompositionImageFilter.h:74</a></div></div>
<div class="ttc" id="aitkRegularStepGradientDescentOptimizer_8h_html"><div class="ttname"><a href="itkRegularStepGradientDescentOptimizer_8h.html">itkRegularStepGradientDescentOptimizer.h</a></div></div>
<div class="ttc" id="aclassitk_1_1VersorRigid3DTransform_html"><div class="ttname"><a href="classitk_1_1VersorRigid3DTransform.html">itk::VersorRigid3DTransform&lt; double &gt;</a></div></div>
<div class="ttc" id="aclassitk_1_1ResourceProbesCollectorBase_html_a3a334272a956025a6147e9a25073dbe9"><div class="ttname"><a href="classitk_1_1ResourceProbesCollectorBase.html#a3a334272a956025a6147e9a25073dbe9">itk::ResourceProbesCollectorBase::Start</a></div><div class="ttdeci">virtual void Start(const char *id)</div></div>
<div class="ttc" id="aitkCenteredTransformInitializer_8h_html"><div class="ttname"><a href="itkCenteredTransformInitializer_8h.html">itkCenteredTransformInitializer.h</a></div></div>
<div class="ttc" id="anamespaceitk_1_1GTest_1_1TypedefsAndConstructors_1_1Dimension2_html_afc9b2e09ca815e90af469040c64abd94"><div class="ttname"><a href="namespaceitk_1_1GTest_1_1TypedefsAndConstructors_1_1Dimension2.html#afc9b2e09ca815e90af469040c64abd94">itk::GTest::TypedefsAndConstructors::Dimension2::VectorType</a></div><div class="ttdeci">ImageBaseType::SpacingType VectorType</div><div class="ttdef"><b>Definition:</b> <a href="itkGTestTypedefsAndConstructors_8h_source.html#l00053">itkGTestTypedefsAndConstructors.h:53</a></div></div>
<div class="ttc" id="aclassitk_1_1MemoryProbesCollectorBase_html"><div class="ttname"><a href="classitk_1_1MemoryProbesCollectorBase.html">itk::MemoryProbesCollectorBase</a></div><div class="ttdoc">Aggregates a set of memory probes.</div><div class="ttdef"><b>Definition:</b> <a href="itkMemoryProbesCollectorBase_8h_source.html#l00037">itkMemoryProbesCollectorBase.h:37</a></div></div>
<div class="ttc" id="aclassitk_1_1Vector_html"><div class="ttname"><a href="classitk_1_1Vector.html">itk::Vector</a></div><div class="ttdoc">A templated class holding a n-Dimensional vector.</div><div class="ttdef"><b>Definition:</b> <a href="itkVector_8h_source.html#l00062">itkVector.h:62</a></div></div>
<div class="ttc" id="aitkImageFileReader_8h_html"><div class="ttname"><a href="itkImageFileReader_8h.html">itkImageFileReader.h</a></div></div>
<div class="ttc" id="aclassitk_1_1ImageRegistrationMethod_html"><div class="ttname"><a href="classitk_1_1ImageRegistrationMethod.html">itk::ImageRegistrationMethod</a></div><div class="ttdoc">Base class for Image Registration Methods.</div><div class="ttdef"><b>Definition:</b> <a href="itkImageRegistrationMethod_8h_source.html#l00070">itkImageRegistrationMethod.h:70</a></div></div>
<div class="ttc" id="aitkSqrtImageFilter_8h_html"><div class="ttname"><a href="itkSqrtImageFilter_8h.html">itkSqrtImageFilter.h</a></div></div>
<div class="ttc" id="aclassitk_1_1ResourceProbesCollectorBase_html_ab65df5ccc88ce6815f0498dc83aea0ad"><div class="ttname"><a href="classitk_1_1ResourceProbesCollectorBase.html#ab65df5ccc88ce6815f0498dc83aea0ad">itk::ResourceProbesCollectorBase::Report</a></div><div class="ttdeci">virtual void Report(std::ostream &amp;os=std::cout, bool printSystemInfo=true, bool printReportHead=true, bool useTabs=false)</div></div>
<div class="ttc" id="aclassitk_1_1SmartPointer_html"><div class="ttname"><a href="classitk_1_1SmartPointer.html">itk::SmartPointer&lt; Self &gt;</a></div></div>
<div class="ttc" id="aitkCastImageFilter_8h_html"><div class="ttname"><a href="itkCastImageFilter_8h.html">itkCastImageFilter.h</a></div></div>
<div class="ttc" id="aitkAffineTransform_8h_html"><div class="ttname"><a href="itkAffineTransform_8h.html">itkAffineTransform.h</a></div></div>
<div class="ttc" id="aclassitk_1_1AffineTransform_html"><div class="ttname"><a href="classitk_1_1AffineTransform.html">itk::AffineTransform</a></div><div class="ttdef"><b>Definition:</b> <a href="itkAffineTransform_8h_source.html#l00101">itkAffineTransform.h:101</a></div></div>
<div class="ttc" id="aclassitk_1_1SqrtImageFilter_html"><div class="ttname"><a href="classitk_1_1SqrtImageFilter.html">itk::SqrtImageFilter</a></div><div class="ttdoc">Computes the square root of each pixel.</div><div class="ttdef"><b>Definition:</b> <a href="itkSqrtImageFilter_8h_source.html#l00067">itkSqrtImageFilter.h:67</a></div></div>
<div class="ttc" id="aclassitk_1_1RegularStepGradientDescentOptimizer_html"><div class="ttname"><a href="classitk_1_1RegularStepGradientDescentOptimizer.html">itk::RegularStepGradientDescentOptimizer</a></div><div class="ttdoc">Implement a gradient descent optimizer.</div><div class="ttdef"><b>Definition:</b> <a href="itkRegularStepGradientDescentOptimizer_8h_source.html#l00033">itkRegularStepGradientDescentOptimizer.h:33</a></div></div>
<div class="ttc" id="aitkMemoryProbesCollectorBase_8h_html"><div class="ttname"><a href="itkMemoryProbesCollectorBase_8h.html">itkMemoryProbesCollectorBase.h</a></div></div>
<div class="ttc" id="aitkBSplineResampleImageFunction_8h_html"><div class="ttname"><a href="itkBSplineResampleImageFunction_8h.html">itkBSplineResampleImageFunction.h</a></div></div>
<div class="ttc" id="aclassitk_1_1ImageFileReader_html"><div class="ttname"><a href="classitk_1_1ImageFileReader.html">itk::ImageFileReader</a></div><div class="ttdoc">Data source that reads image data from a single file.</div><div class="ttdef"><b>Definition:</b> <a href="itkImageFileReader_8h_source.html#l00075">itkImageFileReader.h:75</a></div></div>
<div class="ttc" id="aclassitk_1_1ImageRegionIterator_html"><div class="ttname"><a href="classitk_1_1ImageRegionIterator.html">itk::ImageRegionIterator</a></div><div class="ttdoc">A multi-dimensional iterator templated over image type that walks a region of pixels.</div><div class="ttdef"><b>Definition:</b> <a href="itkImageRegionIterator_8h_source.html#l00080">itkImageRegionIterator.h:80</a></div></div>
<div class="ttc" id="aitkBSplineDecompositionImageFilter_8h_html"><div class="ttname"><a href="itkBSplineDecompositionImageFilter_8h.html">itkBSplineDecompositionImageFilter.h</a></div></div>
<div class="ttc" id="anamespaceitk_1_1GTest_1_1TypedefsAndConstructors_1_1Dimension2_html_a246a71b35a903d08cb4d0aec86f6f366"><div class="ttname"><a href="namespaceitk_1_1GTest_1_1TypedefsAndConstructors_1_1Dimension2.html#a246a71b35a903d08cb4d0aec86f6f366">itk::GTest::TypedefsAndConstructors::Dimension2::IndexType</a></div><div class="ttdeci">ImageBaseType::IndexType IndexType</div><div class="ttdef"><b>Definition:</b> <a href="itkGTestTypedefsAndConstructors_8h_source.html#l00050">itkGTestTypedefsAndConstructors.h:50</a></div></div>
<div class="ttc" id="aclassitk_1_1LinearInterpolateImageFunction_html"><div class="ttname"><a href="classitk_1_1LinearInterpolateImageFunction.html">itk::LinearInterpolateImageFunction</a></div><div class="ttdoc">Linearly interpolate an image at specified positions.</div><div class="ttdef"><b>Definition:</b> <a href="itkLinearInterpolateImageFunction_8h_source.html#l00050">itkLinearInterpolateImageFunction.h:50</a></div></div>
<div class="ttc" id="aclassitk_1_1Command_html"><div class="ttname"><a href="classitk_1_1Command.html">itk::Command</a></div><div class="ttdoc">Superclass for callback/observer methods.</div><div class="ttdef"><b>Definition:</b> <a href="itkCommand_8h_source.html#l00045">itkCommand.h:45</a></div></div>
<div class="ttc" id="aclassitk_1_1BSplineTransform_html"><div class="ttname"><a href="classitk_1_1BSplineTransform.html">itk::BSplineTransform</a></div><div class="ttdoc">Deformable transform using a BSpline representation.</div><div class="ttdef"><b>Definition:</b> <a href="itkBSplineTransform_8h_source.html#l00103">itkBSplineTransform.h:103</a></div></div>
<div class="ttc" id="aclassitk_1_1BSplineResampleImageFunction_html"><div class="ttname"><a href="classitk_1_1BSplineResampleImageFunction.html">itk::BSplineResampleImageFunction</a></div><div class="ttdoc">Resample image intensity from a BSpline coefficient image.</div><div class="ttdef"><b>Definition:</b> <a href="itkBSplineResampleImageFunction_8h_source.html#l00057">itkBSplineResampleImageFunction.h:57</a></div></div>
<div class="ttc" id="aclassitk_1_1ImageFileWriter_html"><div class="ttname"><a href="classitk_1_1ImageFileWriter.html">itk::ImageFileWriter</a></div><div class="ttdoc">Writes image data to a single file.</div><div class="ttdef"><b>Definition:</b> <a href="itkImageFileWriter_8h_source.html#l00088">itkImageFileWriter.h:88</a></div></div>
<div class="ttc" id="aitkBSplineTransform_8h_html"><div class="ttname"><a href="itkBSplineTransform_8h.html">itkBSplineTransform.h</a></div></div>
<div class="ttc" id="anamespaceitk_html_af2b97d337bf8035236a54a91fdcf040a"><div class="ttname"><a href="namespaceitk.html#af2b97d337bf8035236a54a91fdcf040a">itk::Command</a></div><div class="ttdeci">class ITK_FORWARD_EXPORT Command</div><div class="ttdef"><b>Definition:</b> <a href="itkObject_8h_source.html#l00043">itkObject.h:43</a></div></div>
<div class="ttc" id="anamespaceitk_1_1GTest_1_1TypedefsAndConstructors_1_1Dimension2_html_a11afc1c40aa6161a6e22aec177054371"><div class="ttname"><a href="namespaceitk_1_1GTest_1_1TypedefsAndConstructors_1_1Dimension2.html#a11afc1c40aa6161a6e22aec177054371">itk::GTest::TypedefsAndConstructors::Dimension2::RegionType</a></div><div class="ttdeci">ImageBaseType::RegionType RegionType</div><div class="ttdef"><b>Definition:</b> <a href="itkGTestTypedefsAndConstructors_8h_source.html#l00054">itkGTestTypedefsAndConstructors.h:54</a></div></div>
<div class="ttc" id="aitkImageRegistrationMethod_8h_html"><div class="ttname"><a href="itkImageRegistrationMethod_8h.html">itkImageRegistrationMethod.h</a></div></div>
<div class="ttc" id="aitkVersorRigid3DTransform_8h_html"><div class="ttname"><a href="itkVersorRigid3DTransform_8h.html">itkVersorRigid3DTransform.h</a></div></div>
<div class="ttc" id="aclassitk_1_1ResourceProbesCollectorBase_html_ad3ebbd4d6157b8a148ba21bc88e0842b"><div class="ttname"><a href="classitk_1_1ResourceProbesCollectorBase.html#ad3ebbd4d6157b8a148ba21bc88e0842b">itk::ResourceProbesCollectorBase::Stop</a></div><div class="ttdeci">virtual void Stop(const char *id)</div></div>
<div class="ttc" id="aclassitk_1_1Command_html_aa63870ad4b3927aaf128866ef161b208"><div class="ttname"><a href="classitk_1_1Command.html#aa63870ad4b3927aaf128866ef161b208">itk::Command::Execute</a></div><div class="ttdeci">virtual void Execute(Object *caller, const EventObject &amp;event)=0</div></div>
<div class="ttc" id="aitkImageFileWriter_8h_html"><div class="ttname"><a href="itkImageFileWriter_8h.html">itkImageFileWriter.h</a></div></div>
<div class="ttc" id="aitkSquaredDifferenceImageFilter_8h_html"><div class="ttname"><a href="itkSquaredDifferenceImageFilter_8h.html">itkSquaredDifferenceImageFilter.h</a></div></div>
<div class="ttc" id="aclassitk_1_1ResampleImageFilter_html"><div class="ttname"><a href="classitk_1_1ResampleImageFilter.html">itk::ResampleImageFilter</a></div><div class="ttdoc">Resample an image via a coordinate transform.</div><div class="ttdef"><b>Definition:</b> <a href="itkResampleImageFilter_8h_source.html#l00090">itkResampleImageFilter.h:90</a></div></div>
<div class="ttc" id="aclassitk_1_1Object_html"><div class="ttname"><a href="classitk_1_1Object.html">itk::Object</a></div><div class="ttdoc">Base class for most ITK classes.</div><div class="ttdef"><b>Definition:</b> <a href="itkObject_8h_source.html#l00062">itkObject.h:62</a></div></div>
<div class="ttc" id="aclassitk_1_1Image_html"><div class="ttname"><a href="classitk_1_1Image.html">itk::Image</a></div><div class="ttdoc">Templated n-dimensional image class.</div><div class="ttdef"><b>Definition:</b> <a href="itkImage_8h_source.html#l00088">itkImage.h:88</a></div></div>
<div class="ttc" id="aclassitk_1_1EventObject_html"><div class="ttname"><a href="classitk_1_1EventObject.html">itk::EventObject</a></div><div class="ttdoc">Abstraction of the Events used to communicating among filters and with GUIs.</div><div class="ttdef"><b>Definition:</b> <a href="itkEventObject_8h_source.html#l00057">itkEventObject.h:57</a></div></div>
<div class="ttc" id="aitkAddImageFilter_8h_html_a3a600dc8aa7dad7b4c1e9d190d4f8c92"><div class="ttname"><a href="itkAddImageFilter_8h.html#a3a600dc8aa7dad7b4c1e9d190d4f8c92">New</a></div><div class="ttdeci">static Pointer New()</div></div>
<div class="ttc" id="aclassAddImageFilter_html"><div class="ttname"><a href="classAddImageFilter.html">AddImageFilter</a></div><div class="ttdef"><b>Definition:</b> <a href="itkAddImageFilter_8h_source.html#l00080">itkAddImageFilter.h:80</a></div></div>
<div class="ttc" id="aclassitk_1_1ImageRegion_html_a3869e176baeb0833cc46def514f0a46f"><div class="ttname"><a href="classitk_1_1ImageRegion.html#a3869e176baeb0833cc46def514f0a46f">itk::ImageRegion::GetNumberOfPixels</a></div><div class="ttdeci">SizeValueType GetNumberOfPixels() const</div></div>
<div class="ttc" id="aitkCompositeTransform_8h_html"><div class="ttname"><a href="itkCompositeTransform_8h.html">itkCompositeTransform.h</a></div></div>
<div class="ttc" id="aitkResampleImageFilter_8h_html"><div class="ttname"><a href="itkResampleImageFilter_8h.html">itkResampleImageFilter.h</a></div></div>
<div class="ttc" id="aitkTransformFileWriter_8h_html"><div class="ttname"><a href="itkTransformFileWriter_8h.html">itkTransformFileWriter.h</a></div></div>
<div class="ttc" id="aitkCommand_8h_html"><div class="ttname"><a href="itkCommand_8h.html">itkCommand.h</a></div></div>
<div class="ttc" id="aitkAddImageFilter_8h_html_a8c77390f5f26f2ec5a75801152e1f673"><div class="ttname"><a href="itkAddImageFilter_8h.html#a8c77390f5f26f2ec5a75801152e1f673">Superclass</a></div><div class="ttdeci">BinaryGeneratorImageFilter&lt; TInputImage1, TInputImage2, TOutputImage &gt; Superclass</div><div class="ttdef"><b>Definition:</b> <a href="itkAddImageFilter_8h_source.html#l00089">itkAddImageFilter.h:89</a></div></div>
<div class="ttc" id="aitkMattesMutualInformationImageToImageMetric_8h_html"><div class="ttname"><a href="itkMattesMutualInformationImageToImageMetric_8h.html">itkMattesMutualInformationImageToImageMetric.h</a></div></div>
<div class="ttc" id="aclassitk_1_1CenteredTransformInitializer_html"><div class="ttname"><a href="classitk_1_1CenteredTransformInitializer.html">itk::CenteredTransformInitializer</a></div><div class="ttdoc">CenteredTransformInitializer is a helper class intended to initialize the center of rotation and the ...</div><div class="ttdef"><b>Definition:</b> <a href="itkCenteredTransformInitializer_8h_source.html#l00061">itkCenteredTransformInitializer.h:61</a></div></div>
<div class="ttc" id="aclassitk_1_1TimeProbesCollectorBase_html"><div class="ttname"><a href="classitk_1_1TimeProbesCollectorBase.html">itk::TimeProbesCollectorBase</a></div><div class="ttdoc">Aggregates a set of time probes.</div><div class="ttdef"><b>Definition:</b> <a href="itkTimeProbesCollectorBase_8h_source.html#l00038">itkTimeProbesCollectorBase.h:38</a></div></div>
<div class="ttc" id="aclassitk_1_1MattesMutualInformationImageToImageMetric_html"><div class="ttname"><a href="classitk_1_1MattesMutualInformationImageToImageMetric.html">itk::MattesMutualInformationImageToImageMetric</a></div><div class="ttdoc">Computes the mutual information between two images to be registered using the method of Mattes et al.</div><div class="ttdef"><b>Definition:</b> <a href="itkMattesMutualInformationImageToImageMetric_8h_source.html#l00116">itkMattesMutualInformationImageToImageMetric.h:116</a></div></div>
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<hr class="footer"/>
<div class="footer" align="left">
  <small>Tarballs of the nightly generated Doxygen documentation are available
    for the
    <a href="http://public.kitware.com/pub/itk/NightlyDoxygen/InsightDoxygenDocHtml.tar.gz">html</a>,
    <a href="http://public.kitware.com/pub/itk/NightlyDoxygen/InsightDoxygenDocXml.tar.gz">xml</a>, and
    <a href="http://public.kitware.com/pub/itk/NightlyDoxygen/InsightDoxygenDocTag.gz">tag file</a>.
  </small>
</div>
<address class="footer"><small>
Generated on <span id="datetime">unknown</span> for ITK by &#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
